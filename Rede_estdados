//LISTA = REFERÃŠNCIAS ENCADEADAS
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#include <String.h>
typedef struct elemento{
    //conteudo;
    //ponteiros;
    char User[51];
    elemento* Anter;
    elemento* Prox;
}elemento;

typedef struct Lista{
    elemento* cabeca, *cauda;
}Lista;

void cria_lista(Lista* lista){
    lista->cabeca=NULL;
    lista->cauda=NULL;
}
elemento* busca(Lista* lista, char stringx[51]){
    elemento* atual=lista->cabeca, *inicial=lista->cabeca;
    if(atual->User!=stringx){
        atual=atual->Prox;
        while(atual->User!=stringx && atual!=inicial){
            atual=atual->Prox;
        }
        if(atual->User==stringx){
            return atual;
        }
        if(atual==inicial){
            return NULL;
        }
    }
    else{
        return atual;
    }
    }       
    
void insere(Lista* lista, char stringx[51], FILE* output){
    elemento* novo = malloc(sizeof(elemento));
    if (lista->cabeca!=NULL)
    {
        strcpy(novo->User,stringx);
        lista->cauda=novo;
        novo->Prox=lista->cabeca;
        novo->Anter=lista->cauda;
        lista->cauda->Prox=novo;
        lista->cabeca->Anter=novo;
        lista->cauda=novo;
        fprintf(output, "[ OK  ] ADD %s",stringx);
    }
    
    else{
        strcpy(novo->User,stringx);
        lista->cabeca=novo;
        lista->cauda=novo;
        lista->cabeca->Anter=lista->cauda;
        lista->cabeca->Prox=lista->cauda;
        lista->cauda->Anter=lista->cabeca;
        lista->cauda->Prox=lista->cabeca;
        fprintf(output, "[ OK  ] ADD %s",stringx);
    }
    
    
}
void remove(Lista* lista, char stringx[51], FILE* output){
    elemento* no_interesse=busca(lista,stringx);
    if(no_interesse==NULL){
        fprintf(output, "[ERROR] REMOVE %s",stringx);
    }
    else{
        no_interesse->Prox->Anter=no_interesse->Anter;
        no_interesse->Anter->Prox=no_interesse->Prox;
        free(no_interesse);
        no_interesse=NULL;
        fprintf(output, "[ OK  ] REMOVE %s",stringx);
    }
}
void show(Lista* lista, char stringx[51], FILE* output){
    elemento* no_interesse = busca(lista,stringx);
    
    if(no_interesse==NULL){
        fprintf(output, "[ERROR] ?<-%s->?", stringx);
    }
    else{
        fprintf(output, "[ OK  ] %s<-%s->%s", no_interesse->Anter->User, no_interesse->User, no_interesse->Prox->User);
    }
}
int main(int argc, char*argv[]){
    FILE *input= NULL;
    FILE *output= NULL;
}
